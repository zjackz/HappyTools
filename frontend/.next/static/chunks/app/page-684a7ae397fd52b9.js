(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{344:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(5155),r=a(2115);let i=()=>{let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(0),[o,l]=(0,r.useState)({pageNumber:1,pageSize:10}),[n,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null),x=(0,r.useCallback)(async()=>{c(!0),m(null);try{let e={};for(let t in o){let a=o[t];null!=a&&(e[t]=String(a))}let a=new URLSearchParams(e).toString(),s=await fetch("/api/kickstarter/query?".concat(a));if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();t(r.projects),i(r.totalCount)}catch(e){m(e.message)}finally{c(!1)}},[o]);(0,r.useEffect)(()=>{x()},[x]);let u=e=>{let{name:t,value:a,type:s}=e.target;l(e=>({...e,[t]:"number"===s?""===a?void 0:Number(a):a,pageNumber:1}))},g=e=>{l(t=>({...t,pageNumber:e}))},p=Math.ceil(a/o.pageSize);return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Kickstarter Project Query"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"projectName",className:"block text-sm font-medium text-gray-700",children:"Project Name"}),(0,s.jsx)("input",{type:"text",name:"projectName",id:"projectName",value:o.projectName||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"State"}),(0,s.jsx)("input",{type:"text",name:"state",id:"state",value:o.state||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,s.jsx)("input",{type:"text",name:"country",id:"country",value:o.country||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-gray-700",children:"Category Name"}),(0,s.jsx)("input",{type:"text",name:"categoryName",id:"categoryName",value:o.categoryName||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"minGoal",className:"block text-sm font-medium text-gray-700",children:"Min Goal"}),(0,s.jsx)("input",{type:"number",name:"minGoal",id:"minGoal",value:o.minGoal||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"maxGoal",className:"block text-sm font-medium text-gray-700",children:"Max Goal"}),(0,s.jsx)("input",{type:"number",name:"maxGoal",id:"maxGoal",value:o.maxGoal||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"minPledged",className:"block text-sm font-medium text-gray-700",children:"Min Pledged"}),(0,s.jsx)("input",{type:"number",name:"minPledged",id:"minPledged",value:o.minPledged||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"maxPledged",className:"block text-sm font-medium text-gray-700",children:"Max Pledged"}),(0,s.jsx)("input",{type:"number",name:"maxPledged",id:"maxPledged",value:o.maxPledged||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"minBackersCount",className:"block text-sm font-medium text-gray-700",children:"Min Backers"}),(0,s.jsx)("input",{type:"number",name:"minBackersCount",id:"minBackersCount",value:o.minBackersCount||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"maxBackersCount",className:"block text-sm font-medium text-gray-700",children:"Max Backers"}),(0,s.jsx)("input",{type:"number",name:"maxBackersCount",id:"maxBackersCount",value:o.maxBackersCount||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]})]}),n&&(0,s.jsx)("p",{children:"Loading projects..."}),d&&(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",d]}),!n&&!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Goal"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pledged"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Backers"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.state}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.country}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null==(t=e.category)?void 0:t.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.goal}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.pledged}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.backersCount})]},e.id)})})]})}),(0,s.jsxs)("nav",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6","aria-label":"Pagination",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,s.jsx)("span",{className:"font-medium",children:(o.pageNumber-1)*o.pageSize+1})," to"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(o.pageNumber*o.pageSize,a)})," of"," ",(0,s.jsx)("span",{className:"font-medium",children:a})," results"]})}),(0,s.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[(0,s.jsx)("button",{onClick:()=>g(o.pageNumber-1),disabled:o.pageNumber<=1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>g(o.pageNumber+1),disabled:o.pageNumber>=p,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}},613:(e,t,a)=>{Promise.resolve().then(a.bind(a,344))}},e=>{e.O(0,[441,964,358],()=>e(e.s=613)),_N_E=e.O()}]);